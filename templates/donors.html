{% extends "layout.html" %}

{% block title %}
    Donor List
{% endblock %}

{% block main %}
    <div class="section">
        <div class="row justify-content-center">
            <div class="col-md-3 testcol">
                <h3>{{ mp.name }}</h3>
                <img class="width-100 imgbox" alt="Your searched-for MP", 
                src="{{ mp['thumbnail'] }}">
            </div>
            <div class="col-md-9">
                {% if donors is not none %}
                    <table class="table tablestriped">
                        <thead>
                            <tr>
                                {% for key, value in donors[0].items() %}
                                    <th class="text-start">{{ key }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            <!-- TODO: Loop through the database entries to display them in this table -->
                            {% for donor in donors %}
                                <tr>
                                    <td class="text-start">{{ donor['AcceptedDate'] }}</td>
                                    <td class="text-start">{{ donor['ReturnedDate'] }}</td>
                                    <td class="text-start">{{ donor['AttemptedConcealment'] }}</td>
                                    <td class="text-start">{{ donor['CashValue'] }}</td>
                                    <td class="text-start">{{ donor['NonCashValue'] }}</td>
                                    <td class="text-start">{{ donor['IsAnonymous'] }}</td>
                                    <td class="text-start">{{ donor['Value'] }}</td>
                                    <td class="text-start"><a href="{{ url_for('redirect_to', link=donor['DonorName']) }}">{{ donor['DonorName'] }}</a></td>
                                    <td class="text-start">{{ donor['DonorStatus'] }}</td>
                                    <td class="text-start">{{ donor['RegulatedDoneeType'] }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p> Seems like they have no donors!</p>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}