{% extends "layout.html" %}

{% block title %}
    Donor List
{% endblock %}

{% block main %}
    <div class="section">
        <div class="row justify-content-center">
            <div class="col-md-3 testcol">
                <h3>{{ mp.name }}</h3>
                <img class="width-100 imgbox mb-3" alt="Your searched-for MP", 
                src="{{ mp['thumbnail'] }}">
                <h5 class="mb-3">MP for {{ mp.const }}</h5>
                <form action="/" method="GET">
                    <button class="btn btn-primary" type="submit">Back to Homepage</button>
                </form>
            </div>
            <div class="col-md-9">
                {% if donors is not none %}
                    <table class="table tablestriped">
                        <thead>
                            <tr>
                                {% for key, value in donors[0].items() %}
                                    <th class="text-start">{{ key }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="100">
                                    <label for="accounting">Accounting</label>
                                    <input type="checkbox" name="accounting" id="accounting" data-toggle="toggle">
                                </td>
                            </tr>
                        </tbody>
                        <tbody class="hide">
                            <!-- TODO: Loop through the database entries to display them in this table -->
                            {% for donor in donors %}
                                <tr>
                                    <td class="text-start">{{ donor['Year'] }}</td>
                                    <td class="text-start">{{ donor['Returned?'] }}</td>
                                    <td class="text-start">{{ donor['Value'] | gbp }}</td>
                                    <td class="text-start"><a href="{{ url_for('redirect_to', link=donor['DonorName']) }}">{{ donor['DonorName'] }}</a></td>
                                    <td class="text-start">{{ donor['DonorStatus'] }}</td>
                                    <td class="text-start">{{ donor['DonationType'] }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p> Seems like they have no donors!</p>
                {% endif %}
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function() {
            $('[data-toggle="toggle"]').change(function(){
                $(this).parents().next('.hide').toggle();
            });
        });
    </script>
{% endblock %}